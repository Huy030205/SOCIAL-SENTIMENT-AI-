{% extends "base.html" %}
{% block content %}
<div class="card p-4">
  <h4 class="text-primary mb-3">üåê Thu th·∫≠p b√†i ƒëƒÉng t·ª´ m·∫°ng x√£ h·ªôi</h4>

  <form method="POST" class="row g-3 mb-4">
    <div class="col-md-5">
      <label class="form-label">Ch·ªçn n·ªÅn t·∫£ng</label>
      <select class="form-select" name="platform">
        <option value="facebook">Facebook</option>
        <option value="twitter">Twitter (X)</option>
        <option value="instagram">Instagram</option>
      </select>
    </div>
    <div class="col-md-5">
      <label class="form-label">Nh·∫≠p t·ª´ kh√≥a / Fanpage / Hashtag</label>
      <input type="text" class="form-control" name="keyword" placeholder="VD: VinFast, #tiki" required>
    </div>
    <div class="col-md-2 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100">Thu th·∫≠p</button>
    </div>
  </form>

  {% if results %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>N·ªÅn t·∫£ng</th>
        <th>N·ªôi dung</th>
        <th>Th·ªùi gian</th>
        <th>C·∫£m x√∫c</th>
        <th>ƒê·ªô tin c·∫≠y</th>
      </tr>
    </thead>
    <tbody>
      {% for r in results %}
      <tr>
        <td>{{ r.source }}</td>
        <td>{{ r.text }}</td>
        <td>{{ r.time }}</td>
        <td>
          {% if r.label == "POSITIVE" %}
            <span class="badge bg-success">T√≠ch c·ª±c</span>
          {% elif r.label == "NEGATIVE" %}
            <span class="badge bg-danger">Ti√™u c·ª±c</span>
          {% else %}
            <span class="badge bg-secondary">Trung l·∫≠p</span>
          {% endif %}
        </td>
        <td>{{ r.score }}%</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>
{% endblock %}
